## Installation

```bash
npm install rssm zod react
# or
yarn add rssm zod react
# or
bun add rssm zod react
```

## Quick Start

### 1. Define your schema

```typescript
import { z } from 'zod';
import { createRssm } from 'rssm';

const userSchema = z.object({
  id: z.string(),
  name: z.string(),
  email: z.string().email(),
  active: z.boolean(),
});

type User = z.infer<typeof userSchema>;
```

### 2. Create your state machine

```typescript
const { RssmProvider, useRssm } = createRssm<User>('userState');
```

### 3. Wrap your app

```typescript
function App() {
  return (
    <RssmProvider schema={userSchema} name="userState">
      <YourComponent />
    </RssmProvider>
  );
}
```

### 4. Use in components

```typescript
function UserProfile() {
  const { data, loading, error, actions } = useRssm();

  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error}</div>;
  if (!data) return <div>No user data</div>;

  return (
    <div>
      <h1>{data.name}</h1>
      <p>{data.email}</p>
      <button onClick={() => actions.update({ active: !data.active })}>
        Toggle Active
      </button>
    </div>
  );
}
```

## API Reference

### `createRssm<T>(name: string)`

Creates a new Rssm instance with TypeScript support.

**Parameters:**
- `name`: Unique identifier for the state machine

**Returns:**
- `RssmProvider`: React Provider component
- `useRssm`: React Hook for accessing state

### Provider Props

| Prop | Type | Required | Default | Description |
|------|------|----------|---------|-------------|
| `schema` | `ZodSchema<T>` | ‚úÖ | - | Zod schema for validation |
| `name` | `string` | ‚úÖ | - | Unique name for localStorage key |
| `children` | `ReactNode` | ‚úÖ | - | Child components |
| `initialData` | `T \| null` | ‚ùå | `null` | Initial state data |
| `persist` | `boolean` | ‚ùå | `true` | Enable localStorage |
| `ttl` | `number` | ‚ùå | - | Time-to-live in seconds |
| `encrypt` | `boolean` | ‚ùå | `false` | Encrypt stored data |
| `logging` | `boolean` | ‚ùå | `false` | Enable console logging |

### Hook Return Value

The `useRssm` hook returns:

```typescript
{
  data: T | null;        // Current state data
  loading: boolean;      // Loading indicator
  error: string | null;  // Error message
  actions: {
    create: (data: T) => void;
    read: (data: T) => void;
    update: (partial: Partial<T>) => void;
    destroy: () => void;
    reset: () => void;
    setLoading: (loading: boolean) => void;
    setError: (error: string | null) => void;
  };
}
```

## Features

### üîí Encryption

Enable encryption for sensitive data:

```typescript
<RssmProvider
  schema={schema}
  name="secure"
  encrypt={true}
>
  {children}
</RssmProvider>
```

### ‚è∞ TTL (Time-to-Live)

Auto-expire data after specified seconds:

```typescript
<RssmProvider
  schema={schema}
  name="temporary"
  ttl={3600} // 1 hour
>
  {children}
</RssmProvider>
```

### üìù Logging

Enable debug logging:

```typescript
<RssmProvider
  schema={schema}
  name="debug"
  logging={true}
>
  {children}
</RssmProvider>
```

## CLI Tool

Rssm includes a powerful CLI for generating components:

```bash
# Interactive mode
npx rssm create

# With options
npx rssm create \
  --name UserState \
  --schema '{"name": "string", "email": "string"}' \
  --persist \
  --encrypt
```

## TypeScript Support

Rssm is fully typed with TypeScript:

```typescript
// Type is inferred from schema
const { data } = useRssm();
// data is typed as: User | null

// Update accepts Partial<User>
actions.update({ name: 'New Name' }); // ‚úÖ
actions.update({ invalid: 'field' }); // ‚ùå TypeScript error
```

## Best Practices

1. **Unique Names**: Always use unique names for each state machine
2. **Schema Validation**: Define strict schemas for data integrity
3. **Error Handling**: Always handle the error state in your UI
4. **Loading States**: Show appropriate feedback during async operations
5. **Security**: Use encryption for sensitive data

## License

MIT ¬© [Your Name]